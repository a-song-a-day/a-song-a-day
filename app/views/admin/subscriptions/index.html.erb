<% content_for :title, "Subscriptions" %>
<% crumb yield(:title), url_for %>

<h1 class="m-b-2"><%= yield :title %></h1>

<% if @subscriptions.empty? %>
  <div class="alert alert-warning">
    <%= form_for [:admin, Subscription.new(curator_id: Curator.random.id)] do |f| %>
      <%= f.hidden_field :curator_id %>
      <div class="row m-x-0 flex-items-xs-middle flex-items-xs-between">
        <div>
          <strong>Whoa!</strong> You're not subscribed to anything!
        </div>
        <div>
          <button type="submit" class="btn btn-sm bg-warning">Resubscribe?</button>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<% @subscriptions.each do |subscription| %>
  <p class="lead">
    Subscribed since <%= subscription.created_at.to_date.to_s(:long) %>:
  </p>

  <%= render subscription.curator do %>
    <%= link_to "Unsubscribe", admin_subscription_path(subscription),
      method: :delete, data: { confirm: "Really unsubscribe?" },
      class: "btn btn-danger pull-xs-right" %>
  <% end %>
<% end %>
